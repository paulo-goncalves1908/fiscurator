(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{139:function(e,t,a){},168:function(e,t,a){},169:function(e,t,a){},170:function(e,t,a){},171:function(e,t,a){},172:function(e,t,a){},173:function(e,t,a){},174:function(e,t,a){},203:function(e,t,a){},206:function(e,t,a){},207:function(e,t,a){},208:function(e,t,a){},209:function(e,t,a){},210:function(e,t,a){},211:function(e,t,a){},212:function(e,t,a){},213:function(e,t,a){},214:function(e,t,a){"use strict";a.r(t);var n=a(0),s=a.n(n),r=a(70),o=a.n(r),c=(a(139),a(92)),i=a(28),l=a(20),u=a(14),d=a.n(u),b=(a(82),a(19)),p=a(117),h=a.n(p).a.create({baseURL:"".concat(window.location.protocol,"//").concat(window.location.host)});function f(){return g.apply(this,arguments)}function g(){return(g=Object(l.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,t){h.get("/ibmid/accounts").then((function(t){e(t.data)})).catch((function(e){return t(e)}))})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function j(e){return O.apply(this,arguments)}function O(){return(O=Object(l.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,a){h.get("/ibmid/accounts/switch?account_id=".concat(t)).then((function(t){return e(t.data)})).catch((function(e){return a(e)}))})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function v(){return m.apply(this,arguments)}function m(){return(m=Object(l.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,t){h.get("/resources").then((function(t){e(t.data)})).catch((function(e){return t(e)}))})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function x(e){return y.apply(this,arguments)}function y(){return(y=Object(l.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,a){h.get("/ibmid/resources/".concat(t,"/resource_keys")).then((function(t){return e(t.data)})).catch((function(e){return a(e)}))})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var S=a(12),C=Object(n.createContext)({});function I(e){var t=e.children,a=Object(i.g)(),s=Object(n.useState)("en"),r=Object(b.a)(s,2),o=r[0],c=r[1],u=Object(n.useState)({resources:[]}),p=Object(b.a)(u,2),h=p[0],g=p[1],j=Object(n.useState)({entity:{name:""}}),O=Object(b.a)(j,2),m=O[0],x=O[1],y=Object(n.useState)({cognos:{body:{resources:[{guid:"",name:""}]}},cloudant:{body:{resources:[{guid:"",name:""}]}},db2:{body:{resources:[{guid:"",name:""}]}}}),I=Object(b.a)(y,2),T=I[0],D=I[1],E=Object(n.useState)(!0),A=Object(b.a)(E,2),k=A[0],w=A[1],_=Object(n.useState)(!1),L=Object(b.a)(_,2),R=L[0],M=L[1],P=Object(n.useState)(!1),N=Object(b.a)(P,2),B=N[0],H=N[1],U=Object(n.useState)(!1),V=Object(b.a)(U,2),q=V[0],G=V[1],z=Object(n.useState)(!1),F=Object(b.a)(z,2),W=F[0],J=F[1],K=Object(n.useState)(!1),Y=Object(b.a)(K,2),Z=Y[0],Q=Y[1],X=Object(n.useState)(!1),$=Object(b.a)(X,2),ee=$[0],te=$[1],ae=Object(n.useState)(!1),ne=Object(b.a)(ae,2),se=ne[0],re=ne[1],oe=Object(n.useState)(!1),ce=Object(b.a)(oe,2),ie=ce[0],le=ce[1],ue=Object(n.useState)(!1),de=Object(b.a)(ue,2),be=de[0],pe=de[1],he=Object(n.useState)(!1),fe=Object(b.a)(he,2),ge=fe[0],je=fe[1],Oe=Object(n.useState)(!1),ve=Object(b.a)(Oe,2),me=ve[0],xe=ve[1],ye=Object(n.useState)(!1),Se=Object(b.a)(ye,2),Ce=Se[0],Ie=Se[1],Te=Object(n.useState)(!1),De=Object(b.a)(Te,2),Ee=De[0],Ae=De[1],ke=Object(n.useState)([]),we=Object(b.a)(ke,2),_e=we[0],Le=we[1],Re=Object(n.useState)([]),Me=Object(b.a)(Re,2),Pe=Me[0],Ne=Me[1],Be=Object(n.useState)({}),He=Object(b.a)(Be,2),Ue=He[0],Ve=He[1],qe=Object(n.useState)({}),Ge=Object(b.a)(qe,2),ze=Ge[0],Fe=Ge[1],We=Object(n.useState)(""),Je=Object(b.a)(We,2),Ke=Je[0],Ye=Je[1],Ze=Object(n.useState)(null),Qe=Object(b.a)(Ze,2),Xe=Qe[0],$e=Qe[1],et=Object(n.useState)({}),tt=Object(b.a)(et,2),at=tt[0],nt=tt[1],st=Object(n.useState)(null),rt=Object(b.a)(st,2),ot=rt[0],ct=rt[1],it=Object(n.useState)(JSON.parse(localStorage.getItem("@assistant-curator/credentialsAndDefaults"))),lt=Object(b.a)(it,2),ut=lt[0],dt=lt[1],bt=Object(n.useState)(9),pt=Object(b.a)(bt,2),ht=pt[0],ft=pt[1],gt=Object(n.useState)(1),jt=Object(b.a)(gt,2),Ot=jt[0],vt=jt[1],mt=(Ot-1)*ht,xt=mt+ht;return Object(n.useEffect)(Object(l.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""===m.entity.name){e.next=5;break}return e.next=3,f().then((function(e){return g(e)})).catch((function(e){401===e.response.status&&a.push("/login")}));case 3:return e.next=5,v().then((function(e){D(e),te(!1)})).catch((function(e){401===e.response.status&&a.push("/login")}));case 5:case"end":return e.stop()}}),e)}))),[m]),Object(n.useEffect)((function(){localStorage.setItem("@assistant-curator/credentialsAndDefaults",JSON.stringify(ut))}),[ut]),Object(S.jsx)(C.Provider,{value:{language:o,setLanguage:c,loading:k,setLoading:w,helpOpen:R,setHelpOpen:M,cognosHelpOpen:B,setCognosHelpOpen:H,saveModalOpen:ie,setSaveModalOpen:le,loadModalOpen:be,setLoadModalOpen:pe,warningOpen:ge,setWarningOpen:je,standardDashboardModal:me,setStandardDashboardModal:xe,successOpen:Ce,setSuccessOpen:Ie,unsavedChanges:Ee,setUnsavedChanges:Ae,configOpen:q,setConfigOpen:G,cognosConfigOpen:W,setCognosConfigOpen:J,accountModalOpen:Z,setAccountModalOpen:Q,accountSelected:se,setAccountSelected:re,accountLoading:ee,setAccountLoading:te,rowData:_e,setRowData:Le,conversations:Pe,setConversations:Ne,conversationsByDay:Ue,setConversationsByDay:Ve,intentsByDay:ze,setIntentsByDay:Fe,dateFilter:Ke,setDateFilter:Ye,cognosClient:Xe,setCognosClient:$e,cognosSession:at,setCognosSession:nt,cognosDashboard:ot,setCognosDashboard:ct,credentialsAndDefaults:ut,setCredentialsAndDefaults:dt,history:a,accounts:h,setAccounts:g,account:m,setAccount:x,resources:T,setResources:D,itensPerPage:ht,setItensPerPage:ft,currentPage:Ot,setCurrentPage:vt,startIndex:mt,endIndex:xt},children:t})}function T(){var e=Object(n.useContext)(C);if(!e)throw new Error("useGlobalState must be used within a GlobalStateProvider");return e}var D=a(120),E=a.n(D),A=a(121),k=a.n(A),w=a(8),_=a(32),L={pt:{headerSwitcher:{save:"Salvar",upToDate:"J\xe1 atualizado",load:"Load"},infoTable:{sendButton:"Enviar para o BD",group:"Grupo"},accountSelectionModal:{heading:"Selecione a conta desejada",label:"Contas dispon\xedveis",primaryText:"Selecionar",secondaryText:"Cancelar",inputLabel1:"Contas"},modal:{heading:"Informa\xe7\xf5es de conex\xe3o com Db2",label:"Inst\xe2ncia e Tabela consultadas",primaryText:"Recarregar",secondaryText:"Salvar",selectAnOption:"Selecione uma op\xe7\xe3o",alert:"Por favor, selecione uma das inst\xe2ncias listadas",inputLabel1:"Selecione a inst\xe2ncia do Db2 desejada",inputLabel2:"Insira o t\xedtulo da tabela a ser consultada"},cognosModal:{heading:"Credenciais de uso do Cognos",label:"Inst\xe2ncias consultadas",primaryText:"Recarregar",secondaryText:"Salvar",tab1:"Cognos",tab2:"Cloudant",tab3:"Db2",tab4:"Tabelas",selectAnOption:"Selecione uma op\xe7\xe3o",alert:"Por favor, selecione uma das inst\xe2ncias listadas",inputLabel1:"Selecione a inst\xe2ncia do Cognos desejada",inputLabel2:"Selecione a inst\xe2ncia do Cloudant desejada",inputLabel3:"Insira a database do Cloudant desejada",inputLabel4:"Selecione a inst\xe2ncia do Db2 desejada",inputLabel5:"Insira o link do m\xf3dulo xsd",inputLabel6:"Insira o driver Jdbc",inputLabel7:"Tabela de logs",inputLabel8:"Tabela de conversas",inputLabel9:"Tabela de telefonemas",inputLabel10:"Tabela de vari\xe1veis de contexto",inputLabel11:"Tabela de caminhos de conversa",inputLabel12:"Tabela de vis\xe3o geral",inputLabel13:"Tabela de distribui\xe7\xe3o de classes",inputLabel14:"Tabela de precis\xe3o @k",inputLabel15:"Tabela de acur\xe1cia de classes",inputLabel16:"Tabela de inten\xe7\xf5es confundidas",inputLabel17:"Tabela de acur\xe1cia vs cobertura"},saveModal:{heading:"Insira o nome que deseja dar ao dashboard. Este ser\xe1 automaticamente configurado como Dashboard default",label:"Salvar Dashboard no Cloudant",primaryText:"Salvar",secondaryText:"Cancelar",inputLabel1:"Nome (ID) do Dashboard"},loadModal:{heading:"Insira o nome do dashboard que deseja buscar. Este ser\xe1 automaticamente configurado como Dashboard default",label:"Buscar Dashboard no Cloudant",primaryText:"Buscar",secondaryText:"Cancelar",inputLabel1:"Nome (ID) do Dashboard"},modalHelp:{heading:"Ajuda",text:"Esta tabela exibe a troca de mensagens entre cliente e Assistente, destacando qual foi a intent compreendida pelo assistente na mensagem recebida. Com estas informa\xe7\xf5es, o curador pode avaliar o desempenho do assistente no n\xedvel de mensagem."},cognosModalHelp:{heading:"Ajuda",text:"Esta p\xe1gina exibe um dashboard interativo que apresenta m\xe9tricas para auxiliar o processo de curadoria do assitente."},modalWarning:{heading:"Aviso",text:"N\xe3o foi poss\xedvel realizar a conex\xe3o com a base de dados atrav\xe9s dos dados fornecidos. Por favor verifique as informa\xe7\xf5es inseridas e tente novamente.",caption:""},standardDashboardModal:{heading:"Aviso",text:"Inicializando Dashboard Padr\xe3o.",caption:""},modalSuccess:{heading:"Sucesso!",text:"Conex\xe3o realizada com sucesso.",caption:""},tabs:{itensPerPage:"Itens por p\xe1gina"}},es:{headerSwitcher:{save:"Guardar",upToDate:"J\xe1 actualizado",load:"Cargar"},infoTable:{sendButton:"Enviar a BD",group:"Grupo"},accountSelectionModal:{heading:"Seleccione la cuenta deseada",label:"Cuentas disponibles",primaryText:"Seleccione",secondaryText:"Cancelar",inputLabel1:"Cuentas"},modal:{heading:"Informaci\xf3n de conexi\xf3n de Db2",label:"Instancia y Tabla consultada",primaryText:"Recargar",secondaryText:"Guardar",selectAnOption:"Seleccione una opci\xf3n",alert:"Seleccione una de las instancias enumeradas",inputLabel1:"Seleccione la instancia de Db2 deseada",inputLabel2:"Introduzca el t\xedtulo de la tabla a consultar"},cognosModal:{heading:"Credenciales de uso de Cognos",label:"Instancias consultadas",primaryText:"Recargar",secondaryText:"Guardar",tab1:"Cognos",tab2:"Cloudant",tab3:"Db2",tab4:"Tablas",selectAnOption:"Seleccione una opci\xf3n",alert:"Seleccione una de las instancias enumeradas",inputLabel1:"Seleccione la instancia de Cognos deseada",inputLabel2:"Seleccione la instancia de Cloudant deseada",inputLabel3:"Inserte la base de datos Cloudant deseada",inputLabel4:"Seleccione la instancia de Db2 deseada",inputLabel5:"Inserte el enlace del m\xf3dulo xsd",inputLabel6:"Inserte el driver Jdbc",inputLabel7:"Tabla de registros",inputLabel8:"Tabla de conversaci\xf3nes",inputLabel9:"Tabla de llamadas telefonicas",inputLabel10:"Tabla de variables de contexto",inputLabel11:"Tabla de ruta de conversaci\xf3n",inputLabel12:"Tabla de resumen",inputLabel13:"Tabla de distribuci\xf3n de clases",inputLabel14:"Tabla de precisi\xf3n @k",inputLabel15:"Tabla de precisi\xf3n de clase",inputLabel16:"Tabla de intenciones confusas",inputLabel17:"Tabla de precisi\xf3n versus cobertura"},saveModal:{heading:"Ingrese el nombre que desea darle al Dashboard. Esto se establecer\xe1 autom\xe1ticamente como el Dashboard default",label:"Guardar Dashboard en Cloudant",primaryText:"Salvar",secondaryText:"Cancelar",inputLabel1:"Nombre (ID) del Dashboard"},loadModal:{heading:"Ingrese el nombre del Dashboard que desea buscar. Esto se establecer\xe1 autom\xe1ticamente como el Dashboard default",label:"Busca de Dashboard en Cloudant",primaryText:"Buscar",secondaryText:"Cancelar",inputLabel1:"Nombre (ID) del Dashboard"},modalHelp:{heading:"Ayuda",text:"Esta tabla muestra el intercambio de mensajes entre el cliente y el Asistente, destacando qu\xe9 intenci\xf3n entendi\xf3 el asistente en el mensaje recibido. Con esta informaci\xf3n, el curador puede evaluar el desempe\xf1o del asistente a nivel del mensaje."},cognosModalHelp:{heading:"Ayuda",text:"Esta p\xe1gina muestra un tablero interactivo que presenta m\xe9tricas para respaldar el proceso de curaci\xf3n del asistente."},modalWarning:{heading:"Error!",text:"No fue posible conectarse a la base de datos utilizando los datos proporcionados. Verifique la informaci\xf3n ingresada y vuelva a intentarlo.",caption:""},standardDashboardModal:{heading:"Aviso",text:"Inicializando el Dashboard predeterminado.",caption:""},modalSuccess:{heading:"\xc9xito!",text:"Conexi\xf3n exitosa.",caption:""},tabs:{itensPerPage:"Art\xedculos por p\xe1gina"}},en:{headerSwitcher:{save:"Save",upToDate:"Up to date",load:"Load"},infoTable:{sendButton:"Send to DB",group:"Group"},accountSelectionModal:{heading:"Select the desired account",label:"Available accounts",primaryText:"Select",secondaryText:"Cancel",inputLabel1:"Accounts"},modal:{heading:"Db2 conection information",label:"Instance and Table to be consulted",primaryText:"Reload",secondaryText:"Save",selectAnOption:"Select an option",alert:"Please select one of the listed instances",inputLabel1:"Select the desired Db2 instance",inputLabel2:"Enter the title of the table to be queried"},cognosModal:{heading:"Cognos credentials",label:"Consulted Instances",primaryText:"Reload",secondaryText:"Save",tab1:"Cognos",tab2:"Cloudant",tab3:"Db2",tab4:"Tables",selectAnOption:"Select an option",alert:"Please select one of the listed instances",inputLabel1:"Select the desired Cognos instance",inputLabel2:"Select the desired Cloudant instance",inputLabel3:"Enter the desired Cloudant database",inputLabel4:"Select the desired Db2 instance",inputLabel5:"Enter the xsd module link",inputLabel6:"Enter the Jdbc driver",inputLabel7:"Logs table",inputLabel8:"Conversations table",inputLabel9:"Calls table",inputLabel10:"Context variables table",inputLabel11:"Conversation path table",inputLabel12:"Overview table",inputLabel13:"Class Distribution table",inputLabel14:"Precision @k table",inputLabel15:"Class accuracy table",inputLabel16:"Pair wise class errors table",inputLabel17:"Accuracy vs coverage table"},saveModal:{heading:"Enter the name you want to give the Dashboard. This will automatically be set as the default Dashboard",label:"Save Dashboard in Cloudant",primaryText:"Save",secondaryText:"Cancel",inputLabel1:"Dashboard name (ID)"},loadModal:{heading:"Enter the name of the Dashboard you want to search. This will automatically be set as the default Dashboard",label:"Search Dashboard in Cloudant",primaryText:"Search",secondaryText:"Cancel",inputLabel1:"Dashboard name (ID)"},modalHelp:{heading:"Help",text:"This table displays the exchange of messages between client and Assistant, highlighting what intent was understood by the assistant in the received message. With this information, the curator can assess the assistant's performance at the message level."},cognosModalHelp:{heading:"Help",text:"This page displays an interactive dashboard that presents metrics to support the Assistant curation process."},modalWarning:{heading:"Error!",text:"It was not possible to connect through the supplied data. Please check the information and try again.",caption:""},standardDashboardModal:{heading:"Warning",text:"Initializing default Dashboard.",caption:""},modalSuccess:{heading:"Success!",text:"Successfully connected.",caption:""},tabs:{itensPerPage:"Items per page"}}},R=a(253),M=a(238),P=a(239);a(168);function N(e){var t=e.modalOpen,a=T(),n=a.setLoading,s=a.accountModalOpen,r=a.setAccountModalOpen,o=a.setWarningOpen,c=a.setSuccessOpen,i=a.accounts,u=a.setAccount,b=a.setAccountLoading,p=a.language;function h(){return(h=Object(l.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:b(!0),o(!1),c(!1),r(!1),n(!0),t(!0);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(S.jsx)(R.a,{open:s,modalHeading:L[p].accountSelectionModal.heading,modalLabel:L[p].accountSelectionModal.label,primaryButtonText:L[p].accountSelectionModal.primaryText,secondaryButtonText:L[p].accountSelectionModal.secondaryText,onRequestClose:function(){r(!1)},onRequestSubmit:function(){return h.apply(this,arguments)},preventCloseOnClickOutside:!0,children:Object(S.jsx)(M.a,{id:"select-1",invalidText:"A valid value is required",labelText:L[p].accountSelectionModal.inputLabel1,onChange:function(e){j(JSON.parse(e.target.value).metadata.guid).then((function(){localStorage.setItem("savedAccount",e.target.value),u(JSON.parse(e.target.value))}))},children:i&&i.resources.map((function(e){return Object(S.jsx)(P.a,{text:e.entity.name,value:JSON.stringify(e)})}))})})}a(169);function B(){var e=T(),t=e.language,a=e.helpOpen,n=e.setHelpOpen;return Object(S.jsx)(R.a,{open:a,modalHeading:L[t].modalHelp.heading,onRequestClose:function(){n(!1)},preventCloseOnClickOutside:!0,passiveModal:!0,children:Object(S.jsx)("p",{children:L[t].modalHelp.text})})}a(170);function H(){var e=T(),t=e.language,a=e.cognosHelpOpen,n=e.setCognosHelpOpen;return Object(S.jsx)(R.a,{open:a,modalHeading:L[t].cognosModalHelp.heading,onRequestClose:function(){n(!1)},preventCloseOnClickOutside:!0,passiveModal:!0,children:Object(S.jsx)("p",{children:L[t].cognosModalHelp.text})})}var U=a(21),V=a(240);a(171);function q(){var e=T(),t=e.language,a=e.setWarningOpen;function n(){a(!1)}return e.warningOpen?Object(S.jsx)(V.a,Object(U.a)(Object(U.a)({},{kind:"error",title:L[t].modalWarning.heading,subtitle:L[t].modalWarning.text,caption:L[t].modalWarning.caption,iconDescription:"Error",statusIconDescription:"Error",onClose:n,onCloseButtonClick:n,timeout:4500}),{},{style:{marginBottom:".5rem"}})):""}a(172);function G(){var e=T(),t=e.language,a=e.setStandardDashboardModal;function n(){a(!1)}return e.standardDashboardModal?Object(S.jsx)(V.a,Object(U.a)(Object(U.a)({},{kind:"warning",title:L[t].standardDashboardModal.heading,subtitle:L[t].standardDashboardModal.text,caption:L[t].standardDashboardModal.caption,iconDescription:"Warning",statusIconDescription:"Warning",onClose:n,onCloseButtonClick:n,timeout:4500}),{},{style:{marginBottom:".5rem"}})):""}a(173);function z(){var e=T(),t=e.language,a=e.setSuccessOpen;function n(){a(!1)}return e.successOpen?Object(S.jsx)(V.a,Object(U.a)(Object(U.a)({},{kind:"success",title:L[t].modalSuccess.heading,subtitle:L[t].modalSuccess.text,caption:L[t].modalSuccess.caption,iconDescription:"Success",statusIconDescription:"Success",onClose:n,onCloseButtonClick:n,timeout:4500}),{},{style:{marginBottom:".5rem"}})):""}var F=a(78);a(174);function W(e){var t=e.modalOpen,a=e.helpOpen,s=e.renderButton,r=T(),o=r.language,c=r.setLanguage,i=r.setSaveModalOpen,u=r.setLoadModalOpen,p=r.unsavedChanges,h=r.history,f=r.accounts,g=r.account,O=r.setAccount,v=r.setAccountLoading,m={pt:Object(S.jsx)(F.a,{}),es:Object(S.jsx)(F.b,{}),en:Object(S.jsx)(F.c,{})},x=Object(n.useState)(!1),y=Object(b.a)(x,2),C=y[0],I=y[1];return Object(S.jsxs)(_.Header,{"aria-label":"IBM Innovation Studio",children:[Object(S.jsx)(_.HeaderName,{prefix:"IBM Innovation Studio",onClick:function(){return h.push("/dashboard")},children:"Assistant Curator"}),!h.location.pathname.includes("login")&&Object(S.jsxs)(S.Fragment,{children:[Object(S.jsxs)(_.HeaderNavigation,{"aria-label":"IBM [Platform]",children:[Object(S.jsx)(_.HeaderMenuItem,{onClick:function(){return h.push("/search")},children:"Intent Search"}),Object(S.jsx)(_.HeaderMenuItem,{onClick:function(){return h.push("/cognos")},children:"Cognos"})]}),Object(S.jsxs)(_.HeaderGlobalBar,{children:[s&&Object(S.jsx)(_.HeaderGlobalAction,{"aria-label":"Save",onClick:function(){I(!C)},children:p?Object(S.jsx)(w.bc,{style:{fill:"#4589ff"}}):Object(S.jsx)(w.bc,{})}),Object(S.jsx)(_.HeaderMenu,{menuLinkName:g.entity.name,children:f.resources.map((function(e){return Object(S.jsx)(_.HeaderMenuItem,{id:"accounts",onClick:function(){j(e.metadata.guid).then((function(){localStorage.setItem("savedAccount",JSON.stringify(e)),O(e),v(!0),t(!0)}))},children:e.entity.name})}))}),Object(S.jsx)(_.HeaderMenu,{menuLinkName:m[o],children:Object.entries(m).map((function(e){var t=Object(b.a)(e,2),a=t[0],n=t[1];return Object(S.jsxs)(_.HeaderMenuItem,{onClick:function(){c(a),localStorage.setItem("language",a)},children:[n," ".concat(a.toUpperCase())]})}))}),Object(S.jsx)(_.HeaderGlobalAction,{"aria-label":"Settings",onClick:function(){t(!0)},children:Object(S.jsx)(E.a,{})}),Object(S.jsx)(_.HeaderGlobalAction,{"aria-label":"Help",onClick:function(){a(!0)},children:Object(S.jsx)(k.a,{})})]}),Object(S.jsx)(_.HeaderPanel,{"aria-label":"Header Panel",expanded:C,style:{height:"100px",maxWidth:"145px"},children:Object(S.jsxs)(_.Switcher,{"aria-label":"Switcher Container",children:[Object(S.jsx)(_.SwitcherItem,{"aria-label":"Save",onClick:Object(l.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:I(!1),i(!0);case 2:case"end":return e.stop()}}),e)}))),children:p?L[o].headerSwitcher.save:L[o].headerSwitcher.upToDate}),Object(S.jsx)(_.SwitcherItem,{"aria-label":"Load",onClick:Object(l.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:I(!1),u(!0);case 2:case"end":return e.stop()}}),e)}))),children:L[o].headerSwitcher.load})]})}),Object(S.jsx)(N,{modalOpen:t}),Object(S.jsx)(B,{}),Object(S.jsx)(H,{}),Object(S.jsx)(q,{}),Object(S.jsx)(G,{}),Object(S.jsx)(z,{})]})]})}var J=a(254),K=a(244),Y=(a(203),a(249)),Z=a(87),Q=a(93),X=a(91),$=a(218),ee=a(85),te=a(88),ae=a(90),ne=a(89),se=a(86),re=a(48),oe=a(122),ce=a(250),ie=a(123),le=a.n(ie),ue=a(125),de=a.n(ue),be=a(126),pe=a.n(be),he=a(127),fe=a.n(he),ge=a(128),je=a.n(ge),Oe=["value"],ve={1:{icon:Object(S.jsx)(le.a,{}),label:"Very Dissatisfied"},2:{icon:Object(S.jsx)(de.a,{}),label:"Dissatisfied"},3:{icon:Object(S.jsx)(pe.a,{}),label:"Neutral"},4:{icon:Object(S.jsx)(fe.a,{}),label:"Satisfied"},5:{icon:Object(S.jsx)(je.a,{}),label:"Very Satisfied"}};function me(e){var t=e.value,a=Object(oe.a)(e,Oe);return Object(S.jsx)("span",Object(U.a)(Object(U.a)({},a),{},{children:ve[t].icon}))}function xe(e){var t=e.conversationID,a=e.logID,n=e.defaultValue,s=T(),r=s.conversations,o=(s.setConversations,s.setRowData);return Object(S.jsx)(ce.a,{name:"highlight-selected-only",defaultValue:n,IconContainerComponent:me,highlightSelectedOnly:!0,sx:{"& .MuiRating-iconFilled":{color:"#0E61FE"},"& .MuiRating-iconEmpty":{color:"#b5b5b5"}},onChange:function(e,n){!function(e){r[t].map((function(t){t.LOGID===a&&(t.SCORE=e,ye(r,o))}))}(n)}})}function ye(e,t){var a=[];Object.entries(e).map((function(t){var n=Object(b.a)(t,2),s=n[0];n[1];e[s].map((function(e){var t={};t.id=e.LOGID,t.CONVERSATIONID=e.CONVERSATIONID,t.LOGID=e.LOGID,t.CLIENTMESSAGE=e.CLIENTMESSAGE,t.ASSISTANTMESSAGE=e.ASSISTANTMESSAGE,t.FIRSTINTENT=e.FIRSTINTENT,t.CLIENTTIMESTAMP=e.CLIENTTIMESTAMP,t.SCORE=Object(S.jsx)(xe,{conversationID:e.CONVERSATIONID,logID:e.LOGID,defaultValue:e.SCORE}),a.push(t)}))})),t(a)}function Se(e,t,a,n,s,r,o,c,i,l){return Ce.apply(this,arguments)}function Ce(){return(Ce=Object(l.a)(d.a.mark((function e(t,a,n,s,r,o,c,i,l,u){var b;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.post("/getLogs",{connStr:t,table:a});case 2:(b=e.sent).data.conversations&&0!=Object.keys(b.data.conversations).length?(c(!0),n(b.data.conversations),o(Object.keys(b.data.conversationsByDay)[0]),s(b.data.conversationsByDay),r(b.data.intentsByDay),i(!1)):l(u);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ie(){return(Ie=Object(l.a)(d.a.mark((function e(t,a,n,s){var r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.post("/updateScore",{conversation:t,connStr:a,table:n});case 2:r=[],Object.entries(t).map((function(e){var t=Object(b.a)(e,2),a=t[0],n=t[1];r.push([a,n.filter((function(e){return null===e.SCORE}))])})),r=r.filter((function(e){var t=Object(b.a)(e,2);t[0];return 0!==t[1].length})),s(Object.fromEntries(r));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Te(e,t){return De.apply(this,arguments)}function De(){return(De=Object(l.a)(d.a.mark((function e(t,a){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.post("/cognosSession",{username:t,password:a});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ee(e,t,a,n,s,r){return Ae.apply(this,arguments)}function Ae(){return(Ae=Object(l.a)(d.a.mark((function e(t,a,n,s,r,o){var c;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.post("/insertDashboard",{apikey:t,url:a,dbName:n,docId:s,document:r});case 2:if(!(c=e.sent).data.Error){e.next=8;break}return o(!0),e.abrupt("return",c.data);case 8:return e.abrupt("return",c.data);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ke(e,t,a,n,s){return we.apply(this,arguments)}function we(){return(we=Object(l.a)(d.a.mark((function e(t,a,n,s,r){var o;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.post("/getDashboard",{apikey:a,url:n,dbName:s,docId:t});case 2:if(!(o=e.sent).data.Error){e.next=8;break}return r(!0),e.abrupt("return",o.data);case 8:return e.abrupt("return",o.data);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function _e(e,t,a,n,s,r,o,c,i,l,u,d,b,p,h,f,g){return Le.apply(this,arguments)}function Le(){return(Le=Object(l.a)(d.a.mark((function e(t,a,n,s,r,o,c,i,l,u,b,p,f,g,j,O,v){var m;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.post("/initializeDashboard",{xsd:t,jdbcUrl:a,driverClassName:n,schema:s,user:r,password:o,logsTable:c,conversationTable:i,callsTable:l,contextTable:u,conversationPathTable:b,overviewTable:p,classDistributionTable:f,precisionAtKTable:g,classAccuracyTable:j,pairWiseClassErrorsTable:O,accuracyVsCoverageTable:v});case 2:return delete(m=e.sent).data._id,delete m.data._rev,e.abrupt("return",m.data);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Re(e){var t=e.credentials.connection.db2;return"DATABASE=".concat(t.database,";HOSTNAME=").concat(t.hosts[0].hostname,";PORT=").concat(t.hosts[0].port,";PROTOCOL=TCPIP;UID=").concat(t.authentication.username,";PWD=").concat(t.authentication.password,";SECURITY=SSL;")}function Me(e,t){return new Promise(function(){var a=Object(l.a)(d.a.mark((function a(n,s){return d.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.t0=n,a.next=4,h.post("/registerLogin",{docId:e,document:t});case 4:a.t1=a.sent,(0,a.t0)(a.t1),a.next=11;break;case 8:a.prev=8,a.t2=a.catch(0),console.log(a.t2);case 11:case"end":return a.stop()}}),a,null,[[0,8]])})));return function(e,t){return a.apply(this,arguments)}}())}var Pe={credentials:{connectionString:null,db2Username:null,db2Password:null,jdbcUrl:null,cognosUsername:null,cognosPassword:null,cloudantApi:null,cloudantUrl:null},defaults:{defaultDashboardName:null,cloudantDbName:"dashboards",xsd:"https://ibm.com/daas/module/1.0/module.xsd",driverClassName:"com.ibm.db2.jcc.DB2Driver",schema:"CURATOR",logsTable:"LOGS",conversationTable:"CONVERSATIONS",callsTable:"CALLS",contextTable:"CONTEXTVARIABLES",conversationPathTable:"CONVERSATIONPATH",overviewTable:"OVERVIEW",classDistributionTable:"CLASSDISTRIBUTION",precisionAtKTable:"PRECISIONATK",classAccuracyTable:"CLASSACCURACY",pairWiseClassErrorsTable:"PAIRWISECLASSERRORS",accuracyVsCoverageTable:"ACCURACYVSCOVERAGE"}};function Ne(e){var t=e.ID,a=e.day,n=e.rowData,s=T(),r=s.conversations,o=s.setConversations,c=s.credentialsAndDefaults,i=s.language,l=n.filter((function(e){return a?e.CONVERSATIONID===t&&e.CLIENTTIMESTAMP.includes(a)||e.FIRSTINTENT===t&&e.CLIENTTIMESTAMP.includes(a):e.CONVERSATIONID===t||e.FIRSTINTENT===t}));return Object(S.jsx)(Y.a,{rows:l,headers:[{key:"LOGID",header:"logID"},{key:"CLIENTMESSAGE",header:"Client Message"},{key:"ASSISTANTMESSAGE",header:"Assistant Message"},{key:"FIRSTINTENT",header:"Intent identified"},{key:"SCORE",header:"Score (1 - 5)"}],useZebraStyles:!0,stickyHeader:!0,size:"compact",children:function(e){var a=e.rows,n=e.headers,s=e.getHeaderProps,l=e.getTableProps,u=e.getTableContainerProps;return Object(S.jsxs)(Z.a,Object(U.a)(Object(U.a)({title:"".concat(L[i].infoTable.group,": ").concat(""===t?"-":t)},u()),{},{children:[Object(S.jsx)(Q.a,{children:Object(S.jsx)(X.a,{children:Object(S.jsx)($.a,{onClick:function(){!function(e,t,a,n){Ie.apply(this,arguments)}(r,c.credentials.connectionString,c.defaults.logsTable,o)},children:L[i].infoTable.sendButton})})}),Object(S.jsxs)(ee.a,Object(U.a)(Object(U.a)({},l()),{},{children:[Object(S.jsx)(te.a,{children:Object(S.jsx)(ae.a,{children:n.map((function(e){return Object(S.jsx)(ne.a,Object(U.a)(Object(U.a)({},s({header:e})),{},{children:e.header}))}))})}),Object(S.jsx)(se.a,{children:a.map((function(e){return Object(S.jsx)(ae.a,{children:e.cells.map((function(e){return Object(S.jsx)(re.a,{children:e.value},e.id)}))},e.id)}))})]}))]}))}})}function Be(){var e=T(),t=e.rowData,a=e.conversationsByDay,n=e.dateFilter,s=e.startIndex,r=e.endIndex;return Object(S.jsx)(S.Fragment,{children:Object(S.jsx)(J.a,{type:"container",children:a[n].slice(s,r).map((function(e){var o=function(e,t){if(e.length>0){var a=e.filter((function(e){return e.CONVERSATIONID===t}));if(a.length>0)return a[0].CLIENTTIMESTAMP.split(" ")[1].slice(0,8)}}(t,e);return 0===Object.values(a[n].slice(s,r)).indexOf(e)?Object(S.jsx)(K.a,{id:"firstTab",label:o||"DONE!",children:Object(S.jsx)(Ne,{ID:e,rowData:t})}):Object(S.jsx)(K.a,{id:e,label:o||"DONE!",children:Object(S.jsx)(Ne,{ID:e,rowData:t})})}))})})}var He=a(246),Ue=a(247),Ve=a(251),qe=a(245);a(206);function Ge(){var e=T(),t=e.language,a=e.configOpen,s=e.setLoading,r=e.setConfigOpen,o=e.setWarningOpen,c=e.setSuccessOpen,i=e.credentialsAndDefaults,u=e.setCredentialsAndDefaults,p=e.setConversations,h=e.setConversationsByDay,f=e.setIntentsByDay,g=e.setDateFilter,j=e.resources,O=e.accountLoading,v=Object(n.useState)(null),m=Object(b.a)(v,2),y=m[0],C=m[1],I=Object(n.useState)(null),D=Object(b.a)(I,2),E=D[0],A=D[1];function k(){return(k=Object(l.a)(d.a.mark((function e(){var t,a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o(!1),c(!1),r(!1),s(!0),t=Re(E),(a=Object(U.a)({},i)).credentials.connectionString=t,u(a),e.next=10,Se(t,i.defaults.logsTable,p,h,f,g,c,s,w,"");case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function w(){p({}),o(!0),s(!1)}return Object(n.useEffect)((function(){C(j.db2.body.resources[0])}),[j]),Object(n.useEffect)(Object(l.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!y){e.next=5;break}return e.next=3,x(y.guid);case 3:t=e.sent,A(t.resources[0]);case 5:case"end":return e.stop()}}),e)}))),[y]),O?Object(S.jsx)(qe.a,{}):Object(S.jsxs)(R.a,{open:a,modalHeading:L[t].modal.heading,modalLabel:L[t].modal.label,primaryButtonText:L[t].modal.primaryText,secondaryButtonText:L[t].modal.secondaryText,onRequestClose:function(){r(!1)},onRequestSubmit:function(){return k.apply(this,arguments)},preventCloseOnClickOutside:!0,children:[Object(S.jsxs)(M.a,{id:"select-1",invalidText:"A valid value is required",labelText:L[t].modal.inputLabel1,onChange:function(e){"placeholder"===e.target.value?alert(L[t].modal.alert):C(JSON.parse(e.target.value))},children:[Object(S.jsx)(P.a,{text:L[t].modal.selectAnOption,value:"placeholder"}),j.db2.body.resources.map((function(e){return Object(S.jsx)(P.a,{text:e.name,value:JSON.stringify(e)})}))]}),Object(S.jsx)(Ve.a,{"data-modal-primary-focus":!0,id:"text-input-2",labelText:L[t].modal.inputLabel2,placeholder:i.defaults.logsTable,style:{marginBottom:"1rem"},onChange:function(e){var t=Object(U.a)({},i);t.defaults.logsTable=e.target.value.toUpperCase(),u(t)}})]})}var ze=a(255);function Fe(){var e=T(),t=e.conversationsByDay,a=e.dateFilter,n=e.itensPerPage,s=e.setItensPerPage,r=e.currentPage,o=e.setCurrentPage,c=e.language;return Object(S.jsx)("footer",{id:"pagination",children:Object(S.jsx)(ze.a,{itemsPerPageText:L[c].tabs.itensPerPage,page:r,pageNumberText:"Page Number",pageSize:n,pageSizes:[9],totalItems:t[a].length,onChange:function(e){o(e.page),s(e.pageSize),function(){var e=document.getElementById("firstTab");e&&e.click()}()}})})}var We=a(11);function Je(){var e=T(),t=e.conversationsByDay,a=e.dateFilter,s=e.setDateFilter,r=e.setCurrentPage,o=(e.language,Object(n.useState)("")),c=Object(b.a)(o,2),i=c[0],l=c[1];function u(){var e=document.getElementById("firstTab");e&&e.click()}return Object(n.useEffect)((function(){l(a.split("-").reverse().join("/"))}),[a]),Object(S.jsxs)(S.Fragment,{children:[Object(S.jsx)("div",{id:"leftButtons",children:Object(S.jsx)($.a,{kind:"ghost",hasIconOnly:!0,iconDescription:"Previous Date",renderIcon:We.Vd,onClick:function(){s(Object.keys(t)[Object.keys(t).indexOf(a)-1]),u(),r(1)},disabled:0===Object.keys(t).indexOf(a)})}),Object(S.jsx)("div",{id:"dateText",children:"".concat(i)}),Object(S.jsx)("div",{id:"rightButtons",children:Object(S.jsx)($.a,{kind:"ghost",hasIconOnly:!0,iconDescription:"Next Date",renderIcon:We.Zd,onClick:function(){s(Object.keys(t)[Object.keys(t).indexOf(a)+1]),u(),r(1)},disabled:Object.keys(t).indexOf(a)===Object.keys(t).length-1})})]})}a(207);function Ke(){var e=T(),t=e.history,a=e.account,s=e.setLanguage,r=e.setLoading,o=e.loading,c=e.setHelpOpen,i=e.setConfigOpen,u=e.setSuccessOpen,b=e.setWarningOpen,p=e.setRowData,h=e.conversations,f=e.setConversations,g=e.setConversationsByDay,j=e.setIntentsByDay,O=e.setDateFilter,v=e.credentialsAndDefaults,m=e.setCognosSession,x=e.setAccountModalOpen;return Object(n.useEffect)((function(){""===a.entity.name&&t.push("/login")}),[]),Object(n.useEffect)(Object(l.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((t=localStorage.getItem("language"))&&s(t),u(!1),b(!1),m(null),0!==h.length){e.next=8;break}return e.next=8,Se(v.credentials.connectionString,v.defaults.logsTable,f,g,j,O,u,r,x,!0);case 8:case"end":return e.stop()}}),e)}))),[]),Object(n.useEffect)((function(){ye(h,p)}),[h]),Object(S.jsxs)("div",{id:"content",children:[Object(S.jsx)(W,{modalOpen:i,helpOpen:c}),Object(S.jsx)(Ge,{}),o?Object(S.jsxs)(S.Fragment,{children:[Object(S.jsx)(He.a,{type:"container"}),Object(S.jsx)(Ue.a,{})]}):Object(S.jsxs)(S.Fragment,{children:[Object(S.jsx)("div",{id:"dateChooser",children:Object(S.jsx)(Je,{})}),Object(S.jsx)(Be,{}),Object(S.jsx)("div",{id:"footer",children:Object(S.jsx)("div",{id:"pagination",children:Object(S.jsx)(Fe,{})})})]})]})}var Ye=a(243),Ze=a(112),Qe=a(215),Xe=a(248);a(208);function $e(){var e=T(),t=e.account,a=e.history,s=e.setLanguage,r=e.loading,o=e.setLoading,c=e.setHelpOpen,i=e.setConfigOpen,u=e.setSuccessOpen,p=e.setWarningOpen,h=e.conversations,f=e.setConversations,g=e.setConversationsByDay,j=e.intentsByDay,O=e.setIntentsByDay,v=e.dateFilter,m=e.setDateFilter,x=e.rowData,y=e.setRowData,C=e.credentialsAndDefaults,I=e.setCognosSession,D=Object(n.useState)(""),E=Object(b.a)(D,2),A=E[0],k=E[1];Object(n.useEffect)((function(){""===t.entity.name&&a.push("/login")}),[]),Object(n.useEffect)(Object(l.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((t=localStorage.getItem("language"))&&s(t),u(!1),p(!1),I(null),0!==h.length){e.next=8;break}return e.next=8,Se(C.credentials.connectionString,C.defaults.logsTable,f,g,O,m,u,o,i,!0);case 8:case"end":return e.stop()}}),e)}))),[]),Object(n.useEffect)((function(){ye(h,y)}),[h]);return Object(S.jsxs)("div",{id:"search-page",children:[Object(S.jsxs)("div",{id:"top",children:[Object(S.jsx)(W,{id:"header-search",modalOpen:i,helpOpen:c}),Object(S.jsx)("div",{id:"dateChooser",children:Object(S.jsx)(Je,{})}),Object(S.jsx)(Ye.a,Object(U.a)(Object(U.a)({},{className:"some-class",size:"xl",light:!1,disabled:!1,defaultValue:"",labelText:"Search",placeholder:"Search"}),{},{id:"searchBar",onChange:function(e){e.target.value?k(e.target.value):k("")}}))]}),Object(S.jsx)(Ge,{}),r?Object(S.jsx)(Ze.a,{}):Object(S.jsx)("div",{id:"accords",children:Object(S.jsx)(Qe.a,{children:j[v].map((function(e){return e.toLowerCase().replace(/\s/g,"").includes(A.toLowerCase().replace(/\s/g,""))?Object(S.jsx)(Xe.a,{title:""===e?"-":e,children:Object(S.jsx)(Ne,{ID:e,day:v,rowData:x})}):""}))})})]})}var et="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},tt=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();var at=function(){function e(t){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),!t||!t.node)throw new Error("Invalid options parameter passed into the constructor. Must provide both options.node and options.cognosRootURL in the options parameter.");if(this._node=t.node,this._cognosURL=t.cognosRootURL,this._testURL=t.testURL,this._sessionCode=t.sessionCode,this._initTimeout=t.initTimeout||3e4,this._apiKey=e._createUID("capi"),this._pendingRequests={},this._eventCallbacks={},this._eventReverseLookup={},t.language&&"string"===typeof t.language){var a=t.language.toLowerCase();if(!e.SUPPORTED_LANGUAGES[a])throw new Error("Unsupported language: "+a);this._language=a}else this._language="en";this._message_regex=new RegExp("#capi#(.+)#"+this._apiKey+"#(.*)$","g"),this.updateModuleDefinitions=e._updateModuleDefinitions.bind(this)}return tt(e,[{key:"initialize",value:function(){var t=this;return this._readyPromise||(this._readyPromise=new Promise((function(a,n){t._initializeContainer(),t._initializeService().then((function(){t._sendMessage({apiId:t._apiKey,actionId:e._createUID(e.APISERVICE_INIT),name:e.APISERVICE_INIT},a,n)}))}))),this._readyPromise}},{key:"on",value:function(t,a){this._eventReverseLookup[a]||this._sendMessage({apiId:this._apiKey,actionId:e._createUID(e.APISERVICE_ON),name:e.APISERVICE_ON,parameters:Array.prototype.slice.call(arguments)},a)}},{key:"off",value:function(t,a){this._eventReverseLookup[a]&&this._sendMessage({apiId:this._apiKey,actionId:this._eventReverseLookup[a],name:e.APISERVICE_OFF,parameters:Array.prototype.slice.call(arguments)},a)}},{key:"_initializeContainer",value:function(){var t=document.createElement("iframe");t.src=this._buildSourceUrl(),t.setAttribute("class",e.APISERVICE_CLASS),t.setAttribute("style","height:100%; width:100%;"),t.setAttribute("frameBorder","0"),this._node.innerHTML="",this._node.appendChild(t),this._target=t.contentWindow,this._targetOrigin=(/(https*:\/\/[^\/]+)/.exec(this._cognosURL)||[window.location.origin])[0]}},{key:"close",value:function(){var e=this;return new Promise((function(t,a){e._destroyService().then((function(a){e._cleanupApiService(),e._cleanupContainer(),t(a)}),(function(e){a(e)}))}))}},{key:"_buildSourceUrl",value:function(){if(this._testURL)return this._testURL;var e=this._cognosURL+(-1===this._cognosURL.indexOf("?")?"?":"&"),t={perspective:"postMessageApiLoader",apiKey:this._apiKey,parentOrigin:window.location.origin,sessionCode:this._sessionCode,contentLanguage:this._language};return e+Object.keys(t).map((function(e){return encodeURIComponent(e)+"="+encodeURIComponent(t[e])})).join("&")}},{key:"_cleanupApiService",value:function(){var e=this;this._messageHandler&&window.removeEventListener("message",this._messageHandler,!1),Object.keys(this).forEach((function(t){0!==t.indexOf("_")&&"object"===et(e[t])&&e[t].apiId&&delete e[t]})),this._pendingRequests={},this._eventCallbacks={},this._eventReverseLookup={},this._messageHandler=null,this.apiId=null}},{key:"_cleanupContainer",value:function(){if(this._node){var t=this._node.getElementsByClassName(e.APISERVICE_CLASS)||[];1===t.length&&this._node.removeChild(t[0])}this._readyPromise=null,this._targetOrigin=null,this._target=null}},{key:"_initializeService",value:function(){var e=this;return this._messageHandler=this._receiveMessage.bind(this),window.addEventListener("message",this._messageHandler,!1),new Promise((function(t,a){e._registerResponseCallbacks(e._apiKey,t,a)}))}},{key:"_destroyService",value:function(){var t=this;return new Promise((function(a,n){t._sendMessage({apiId:t._apiKey,actionId:e._createUID(e.APISERVICE_DESTROY),name:e.APISERVICE_DESTROY},a,n)}))}},{key:"_registerResponseCallbacks",value:function(e,t,a){e&&t&&(this._pendingRequests[e]={success:t,fail:a})}},{key:"_resolveResponseCallbacks",value:function(e,t){e&&this._pendingRequests[e]&&(this._pendingRequests[e].success(t),delete this._pendingRequests[e])}},{key:"_rejectResponseCallbacks",value:function(e,t){e&&this._pendingRequests[e]&&(this._pendingRequests[e].fail(t),delete this._pendingRequests[e])}},{key:"_registerEventCallbacks",value:function(e,t){e&&t&&(this._eventCallbacks[e]=t,this._eventReverseLookup[t]=e)}},{key:"_unregisterEventCallbacks",value:function(e,t){e&&t&&this._eventReverseLookup[t]===e&&(delete this._eventCallbacks[e],delete this._eventReverseLookup[t])}},{key:"_handleEventCallbacks",value:function(e,t){e&&"function"===typeof this._eventCallbacks[e]&&this._eventCallbacks[e].call(this._eventCallbacks[e],t)}},{key:"_sendMessage",value:function(e,t,a){this._target&&("on"===e.name?this._registerEventCallbacks(e.actionId,t):"off"===e.name?this._unregisterEventCallbacks(e.actionId,t):this._registerResponseCallbacks(e.actionId,t,a),this._target.postMessage(this._createMessage(e),this._targetOrigin))}},{key:"_receiveMessage",value:function(t){if(t.origin===this._targetOrigin){var a=this._parseMessage(t.data);if(null!==a)if(a.status&&"success"!==a.status)this._rejectResponseCallbacks(a.actionId,a.payload);else switch(a.type){case"ready":this._resolveResponseCallbacks(this._apiKey);break;case"api":var n=0===a.actionId.indexOf(e.APISERVICE_INIT)?this:{};this._injectAPI(n,a.payload),this._resolveResponseCallbacks(a.actionId,n);break;case"event":this._handleEventCallbacks(a.actionId,a.payload);break;default:this._resolveResponseCallbacks(a.actionId,a.payload)}}}},{key:"_createMessage",value:function(t){return e.APIHEADER+e.APIHEADER_DELIMITER+this._apiKey+e.APIHEADER_DELIMITER+JSON.stringify(t)}},{key:"_parseMessage",value:function(e){var t=this._message_regex.exec(e);return"object"===("undefined"===typeof t?"undefined":et(t))&&null!==t?(this._message_regex.lastIndex=0,JSON.parse(t[2])):null}},{key:"_injectAPI",value:function(e,t){var a=this;Object.keys(t).forEach((function(n){"apiId"===n?e[n]=t[n]:t[n].apiId?(e[n]={},a._injectAPI(e[n],t[n])):"enum"===t[n].type?e[n]=t[n].values:"method"===t[n].type&&(e[n]=a._getAPIMethod(n,t.apiId))}))}},{key:"_getAPIMethod",value:function(t,a){var n=this;return"on"===t?function(){for(var s=arguments.length,r=Array(s),o=0;o<s;o++)r[o]=arguments[o];var c=Array.prototype.slice.call(r),i=c[1];n._sendMessage({apiId:a,actionId:e._createUID(t),name:t,parameters:c},i,i)}:"off"===t?function(){for(var e=arguments.length,s=Array(e),r=0;r<e;r++)s[r]=arguments[r];var o=Array.prototype.slice.call(s),c=o[1];n._sendMessage({apiId:a,actionId:n._eventReverseLookup[c],name:t,parameters:o},c,c)}:function(){for(var s=arguments.length,r=Array(s),o=0;o<s;o++)r[o]=arguments[o];var c=Array.prototype.slice.call(r);return new Promise((function(s,r){n._sendMessage({apiId:a,actionId:e._createUID(t),name:t,parameters:c},s,r)}))}}}],[{key:"_updateModuleDefinitions",value:function(t,a){if(!t||!t.dataSources||!t.dataSources.sources)return Promise.resolve(t);var n=[];if(t.dataSources.sources.forEach((function(e){e.clientId&&n.push(e.clientId)})),0===n.length)return Promise.resolve(t);var s=a(n);return s&&"function"===typeof s.then?s.then((function(a){return e._doModuleUpdate(t,a)})):Promise.resolve(e._doModuleUpdate(t,s))}},{key:"_doModuleUpdate",value:function(e,t){var a=JSON.parse(JSON.stringify(e));if(t){var n=!0,s=!1,r=void 0;try{for(var o,c=a.dataSources.sources[Symbol.iterator]();!(n=(o=c.next()).done);n=!0){var i=o.value,l=!0,u=!1,d=void 0;try{for(var b,p=t[Symbol.iterator]();!(l=(b=p.next()).done);l=!0){var h=b.value;h.id===i.clientId&&(h.module&&(i.module=h.module),h.name&&(i.name=h.name),h.newId&&h.id!==h.newId&&(i.clientId=h.newId))}}catch(f){u=!0,d=f}finally{try{!l&&p.return&&p.return()}finally{if(u)throw d}}}}catch(f){s=!0,r=f}finally{try{!n&&c.return&&c.return()}finally{if(s)throw r}}}return a}},{key:"_createUID",value:function(t){var a=Date.now().valueOf();return e.__uid=e.__uid===a?a+1:a,t+"_"+e.__uid.toString(16)}}]),e}();at.EVENTS={REQUEST_ERROR:"api:error:request"},at.APIHEADER_DELIMITER="#",at.APIHEADER_MARKER="capi",at.APIHEADER_VERSION="v1",at.APIHEADER=at.APIHEADER_DELIMITER+at.APIHEADER_MARKER+at.APIHEADER_DELIMITER+at.APIHEADER_VERSION,at.APISERVICE_INIT="getAppApi",at.APISERVICE_ON="on",at.APISERVICE_OFF="off",at.APISERVICE_DESTROY="destroyAppApi",at.APISERVICE_CLASS="capi-service",at.SUPPORTED_LANGUAGES=Object.freeze({cs:"Czech",da:"Danish",de:"German",en:"English",es:"Spanish",fi:"Finnish",fr:"French",hr:"Croatian",hu:"Hungarian",it:"Italian",ja:"Japanese",kk:"Kazakh",ko:"Korean",nb:"Norwegian Bokm\xe5l",nl:"Dutch",no:"Norwegian",pl:"Polish",pt:"Portuguese","pt-br":"Portuguese (Brazil)",ro:"Romanian",ru:"Russian",sl:"Slovenian",sv:"Swedish",th:"Thai",tr:"Turkish",zh:"Chinese","zh-cn":"Chinese (China)","zh-tw":"Chinese (Taiwan)"});var nt=at;a(209);function st(e){var t=e.index,a=e.field,n=e.upperCase,s=T(),r=s.language,o=s.credentialsAndDefaults,c=s.setCredentialsAndDefaults;return Object(S.jsx)(Ve.a,{"data-modal-primary-focus":!0,id:"text-input-".concat(t),labelText:L[r].cognosModal["inputLabel".concat(t)],placeholder:o.defaults[a],style:{marginBottom:"1rem"},onChange:function(e){var t=Object(U.a)({},o);t.defaults[a]=n?e.target.value.toUpperCase():e.target.value,c(t)}})}function rt(e){var t=e.index,a=e.setSelection,n=e.field,s=T(),r=s.resources,o=s.language;return Object(S.jsxs)(M.a,{id:"select-".concat(t),invalidText:"A valid value is required",labelText:L[o].cognosModal["inputLabel".concat(t)],onChange:function(e){"placeholder"===e.target.value?alert(L[o].cognosModal.alert):a(JSON.parse(e.target.value))},children:[Object(S.jsx)(P.a,{text:L[o].cognosModal.selectAnOption,value:"placeholder"}),r[n].body.resources.map((function(e){return Object(S.jsx)(P.a,{text:e.name,value:JSON.stringify(e)})}))]})}a(210);function ot(){var e=T(),t=e.history,a=e.language,s=e.cognosConfigOpen,r=e.setCognosConfigOpen,o=e.credentialsAndDefaults,c=e.setCredentialsAndDefaults,i=e.setCognosSession,u=e.setWarningOpen,p=e.setUnsavedChanges,h=e.accountLoading,f=e.setCognosDashboard,g=Object(n.useState)(null),j=Object(b.a)(g,2),O=j[0],v=j[1],m=Object(n.useState)(null),y=Object(b.a)(m,2),C=y[0],I=y[1],D=Object(n.useState)(null),E=Object(b.a)(D,2),A=E[0],k=E[1];function w(){return(w=Object(l.a)(d.a.mark((function e(){var a,n,s;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x(O.guid).catch((function(){return t.push("/login")}));case 2:a=e.sent,n=a.resources[0].credentials,(s=Object(U.a)({},o)).credentials.cognosUsername=n.client_id,s.credentials.cognosPassword=n.client_secret,c(s);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function _(){return(_=Object(l.a)(d.a.mark((function e(){var a,n,s;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x(C.guid).catch((function(){return t.push("/login")}));case 2:a=e.sent,n=a.resources[0].credentials,(s=Object(U.a)({},o)).credentials.cloudantApi=n.apikey,s.credentials.cloudantUrl=n.url,c(s);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function M(){return(M=Object(l.a)(d.a.mark((function e(){var a,n,s;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x(A.guid).catch((function(){return t.push("/login")}));case 2:a=e.sent,n=a.resources[0].credentials,(s=Object(U.a)({},o)).credentials.db2Username=n.connection.db2.authentication.username,s.credentials.db2Password=n.connection.db2.authentication.password,s.credentials.jdbcUrl=n.connection.db2.jdbc_url[0].replace("user=<userid>;password=<your_password>;",""),c(s);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function P(){return(P=Object(l.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i(null),f(null),p(!1),e.next=5,Te(o.credentials.cognosUsername,o.credentials.cognosPassword);case 5:(t=e.sent).data.Error?(u(!0),i(null)):i(t.data);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(n.useEffect)((function(){O&&function(){w.apply(this,arguments)}()}),[O]),Object(n.useEffect)((function(){C&&function(){_.apply(this,arguments)}()}),[C]),Object(n.useEffect)((function(){A&&function(){M.apply(this,arguments)}()}),[A]),h?Object(S.jsx)(qe.a,{}):Object(S.jsx)(R.a,{id:"cognosModal",hasForm:!0,open:s,modalHeading:L[a].cognosModal.heading,modalLabel:L[a].cognosModal.label,primaryButtonText:L[a].cognosModal.primaryText,secondaryButtonText:L[a].cognosModal.secondaryText,onRequestClose:function(){r(!1)},onRequestSubmit:function(){return P.apply(this,arguments)},preventCloseOnClickOutside:!0,children:Object(S.jsxs)(J.a,{type:"container",children:[Object(S.jsx)(K.a,{id:"cognos",label:L[a].cognosModal.tab1,children:Object(S.jsx)(rt,{index:1,setSelection:v,field:"cognos"})}),Object(S.jsxs)(K.a,{id:"cloudant",label:L[a].cognosModal.tab2,children:[Object(S.jsx)(rt,{index:2,setSelection:I,field:"cloudant"}),Object(S.jsx)(st,{index:3,field:"cloudantDbName",upperCase:!1})]}),Object(S.jsxs)(K.a,{id:"db2",label:L[a].cognosModal.tab3,children:[Object(S.jsx)(rt,{index:2,setSelection:k,field:"db2"}),Object(S.jsx)(st,{index:5,field:"xsd",upperCase:!1}),Object(S.jsx)(st,{index:6,field:"driverClassName",upperCase:!1})]}),Object(S.jsxs)(K.a,{id:"db2tables",label:L[a].cognosModal.tab4,children:[Object(S.jsx)(st,{index:7,field:"logsTable",upperCase:!0}),Object(S.jsx)(st,{index:8,field:"conversationTable",upperCase:!0}),Object(S.jsx)(st,{index:9,field:"callsTable",upperCase:!0}),Object(S.jsx)(st,{index:10,field:"contextTable",upperCase:!0}),Object(S.jsx)(st,{index:11,field:"conversationPathTable",upperCase:!0}),Object(S.jsx)(st,{index:12,field:"overviewTable",upperCase:!0}),Object(S.jsx)(st,{index:13,field:"classDistributionTable",upperCase:!0}),Object(S.jsx)(st,{index:14,field:"precisionAtKTable",upperCase:!0}),Object(S.jsx)(st,{index:15,field:"classAccuracyTable",upperCase:!0}),Object(S.jsx)(st,{index:16,field:"pairWiseClassErrorsTable",upperCase:!0}),Object(S.jsx)(st,{index:17,field:"accuracyVsCoverageTable",upperCase:!0})]})]})})}a(211);function ct(){var e=T(),t=e.language,a=e.credentialsAndDefaults,n=e.setCredentialsAndDefaults,s=e.cognosDashboard,r=e.setUnsavedChanges,o=e.setWarningOpen,c=e.saveModalOpen,i=e.setSaveModalOpen;function u(){return(u=Object(l.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o(!1),e.next=3,Ee(a.credentials.cloudantApi,a.credentials.cloudantUrl,a.defaults.cloudantDbName,a.defaults.defaultDashboardName,s,o);case 3:e.sent.Error||r(!1),i(!1);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(S.jsx)(R.a,{open:c,modalHeading:L[t].saveModal.heading,modalLabel:L[t].saveModal.label,primaryButtonText:L[t].saveModal.primaryText,secondaryButtonText:L[t].saveModal.secondaryText,onRequestClose:function(){o(!1),i(!1)},onRequestSubmit:function(){return u.apply(this,arguments)},preventCloseOnClickOutside:!0,children:Object(S.jsx)(Ve.a,{"data-modal-primary-focus":!0,id:"text-input-9",labelText:L[t].saveModal.inputLabel1,placeholder:a.defaults.defaultDashboardName,style:{marginBottom:"1rem"},onChange:function(e){var t=Object(U.a)({},a);t.defaults.defaultDashboardName=e.target.value,n(t)}})})}a(212);function it(){var e=T(),t=e.language,a=e.credentialsAndDefaults,n=e.setCredentialsAndDefaults,s=e.setWarningOpen,r=e.loadModalOpen,o=e.setUnsavedChanges,c=e.setLoadModalOpen,i=e.cognosClient,u=e.setCognosDashboard;function b(e,t){return p.apply(this,arguments)}function p(){return p=Object(l.a)(d.a.mark((function e(t,a){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,n){try{t.initialize().then((function(){t.dashboard.openDashboard({dashboardSpec:a}).then(function(){var t=Object(l.a)(d.a.mark((function t(a){return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a.setMode(a.MODES.EDIT),t.t0=u,t.next=4,a.getSpec();case 4:t.t1=t.sent,(0,t.t0)(t.t1),a.on(a.EVENTS.DIRTY,Object(l.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o(!0),e.next=3,a.getSpec();case 3:t=e.sent,u(t);case 5:case"end":return e.stop()}}),e)})))),e("Ok");case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}))}catch(s){n("Bad Credentials/DbName  ")}})));case 1:case"end":return e.stop()}}),e)}))),p.apply(this,arguments)}function h(){return(h=Object(l.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s(!1),e.next=3,ke(a.defaults.defaultDashboardName,a.credentials.cloudantApi,a.credentials.cloudantUrl,a.defaults.cloudantDbName,s);case 3:if(!(t=e.sent).Error){e.next=8;break}c(!1),e.next=12;break;case 8:return e.next=10,b(i,t);case 10:o(!1),c(!1);case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(S.jsx)(R.a,{open:r,modalHeading:L[t].loadModal.heading,modalLabel:L[t].loadModal.label,primaryButtonText:L[t].loadModal.primaryText,secondaryButtonText:L[t].loadModal.secondaryText,onRequestClose:function(){s(!1),c(!1)},onRequestSubmit:function(){return h.apply(this,arguments)},preventCloseOnClickOutside:!0,children:Object(S.jsx)(Ve.a,{"data-modal-primary-focus":!0,id:"text-input-9",labelText:L[t].loadModal.inputLabel1,placeholder:a.defaults.defaultDashboardName,style:{marginBottom:"1rem"},onChange:function(e){var t=Object(U.a)({},a);t.defaults.defaultDashboardName=e.target.value,n(t)}})})}function lt(){var e=T(),t=e.account,a=e.history,s=e.language,r=e.setLanguage,o=e.setCognosConfigOpen,c=e.setCognosHelpOpen,i=e.setCognosClient,u=e.cognosSession,p=e.setCognosSession,h=e.credentialsAndDefaults,f=e.cognosDashboard,g=e.setCognosDashboard,j=e.setSuccessOpen,O=e.setUnsavedChanges,v=e.setStandardDashboardModal,m=Object(n.useState)(!1),x=Object(b.a)(m,2),y=x[0],C=x[1];function I(e,t,a){return D.apply(this,arguments)}function D(){return D=Object(l.a)(d.a.mark((function e(t,a,n){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,s){t.initialize().then((function(){t.dashboard.openDashboard({dashboardSpec:a}).then(function(){var t=Object(l.a)(d.a.mark((function t(a){return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a.setMode(a.MODES.EDIT),t.t0=g,t.next=4,a.getSpec();case 4:t.t1=t.sent,(0,t.t0)(t.t1),a.on(a.EVENTS.DIRTY,Object(l.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.getSpec();case 2:t=e.sent,n(!0),g(t);case 5:case"end":return e.stop()}}),e)})))),C(!0),e("Ok");case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}))})));case 1:case"end":return e.stop()}}),e)}))),D.apply(this,arguments)}function E(e){return A.apply(this,arguments)}function A(){return A=Object(l.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.initialize().then(Object(l.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=t.dashboard,e.next=3,_e(h.defaults.xsd,h.credentials.jdbcUrl,h.defaults.driverClassName,h.defaults.schema,h.credentials.db2Username,h.credentials.db2Password,h.defaults.logsTable,h.defaults.conversationTable,h.defaults.callsTable,h.defaults.contextTable,h.defaults.conversationPathTable,h.defaults.overviewTable,h.defaults.classDistributionTable,h.defaults.precisionAtKTable,h.defaults.classAccuracyTable,h.defaults.pairWiseClassErrorsTable,h.defaults.accuracyVsCoverageTable);case 3:e.t1=e.sent,e.t2={dashboardSpec:e.t1},e.t0.openDashboard.call(e.t0,e.t2).then(function(){var e=Object(l.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.setMode(t.MODES.EDIT),e.t0=g,e.next=4,t.getSpec();case 4:e.t1=e.sent,(0,e.t0)(e.t1),t.on(t.EVENTS.DIRTY,Object(l.a)(d.a.mark((function e(){var a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getSpec();case 2:a=e.sent,O(!0),g(a);case 5:case"end":return e.stop()}}),e)})))),C(!0);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 6:case"end":return e.stop()}}),e)}))));case 1:case"end":return e.stop()}}),e)}))),A.apply(this,arguments)}return Object(n.useEffect)((function(){""===t.entity.name&&a.push("/login")}),[]),Object(n.useEffect)(Object(l.a)(d.a.mark((function e(){var t,a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((t=localStorage.getItem("language"))&&r(t),j(!1),v(!1),!h.credentials.cognosUsername||"null"===h.credentials.cognosUsername||!h.credentials.cognosPassword||"null"===h.credentials.cognosPassword){e.next=11;break}return e.next=7,Te(h.credentials.cognosUsername,h.credentials.cognosPassword);case 7:(a=e.sent).data.Error?p(null):p(a.data),e.next=12;break;case 11:o(!0);case 12:case"end":return e.stop()}}),e)}))),[]),Object(n.useEffect)(Object(l.a)(d.a.mark((function e(){var t,a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!u||"string"!==typeof u){e.next=21;break}if(t=new nt({cognosRootURL:"https://us-south.dynamic-dashboard-embedded.cloud.ibm.com/daas/",node:document.getElementById("cognosDiv"),sessionCode:u,language:s}),i(t),!f){e.next=8;break}return e.next=6,I(t,f,O);case 6:e.next=19;break;case 8:return e.next=10,ke(h.defaults.defaultDashboardName,h.credentials.cloudantApi,h.credentials.cloudantUrl,h.defaults.cloudantDbName,v);case 10:if(a=e.sent,o(!1),a.Error){e.next=17;break}return e.next=15,I(t,a,O);case 15:e.next=19;break;case 17:return e.next=19,E(t);case 19:e.next=22;break;case 21:u||(C(!1),i(null));case 22:case"end":return e.stop()}}),e)}))),[u]),Object(S.jsxs)("div",{id:"content",children:[Object(S.jsx)(W,{modalOpen:o,helpOpen:c,renderButton:y}),Object(S.jsx)(ct,{}),Object(S.jsx)(it,{}),Object(S.jsx)(ot,{}),Object(S.jsx)("div",{id:"cognosDiv"})]})}a(213);function ut(){var e=T(),t=e.setHelpOpen,a=e.setConfigOpen,s=e.history,r=e.setAccount,o=e.setAccounts,c=e.setResources,i=e.credentialsAndDefaults,u=e.setCredentialsAndDefaults,p=Object(n.useState)(""),g=Object(b.a)(p,2),O=g[0],m=g[1],x=Object(n.useState)(!1),y=Object(b.a)(x,2),C=y[0],I=y[1],D=Object(n.useState)(!1),E=Object(b.a)(D,2),A=E[0],k=E[1];function w(){return(w=Object(l.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return k(!0),e.prev=1,e.next=4,h.post("/ibmid/login",{passcode:O});case 4:return e.next=6,f();case 6:if(t=e.sent,o(t),!localStorage.getItem("savedAccount")||!t.resources.some((function(e){return JSON.stringify(e)===localStorage.getItem("savedAccount")}))){e.next=14;break}return console.log("Found account. Picking last one used"),e.next=12,j(JSON.parse(localStorage.getItem("savedAccount")).metadata.guid).then((function(){r(JSON.parse(localStorage.getItem("savedAccount")))}));case 12:e.next=16;break;case 14:console.log("No saved account. Picking default first"),r(t.resources[0]);case 16:return e.t0=c,e.next=19,v();case 19:e.t1=e.sent,(0,e.t0)(e.t1),s.push("/dashboard"),Me("".concat(t.resources[0].entity.primary_owner.ibmid," - ").concat((new Date).toLocaleDateString("pt-BR",{timeZone:"America/Sao_Paulo",hour:"numeric",minute:"numeric",second:"numeric"})),t.resources[0]),e.next=28;break;case 25:e.prev=25,e.t2=e.catch(1),I(!0);case 28:k(!1);case 29:case"end":return e.stop()}}),e,null,[[1,25]])})))).apply(this,arguments)}return Object(n.useEffect)((function(){var e=Object(U.a)({},i);null===i?e=Pe:Object.entries(i.defaults).map((function(t){var a=Object(b.a)(t,2),n=a[0];null===a[1]&&(e.defaults[n]=Pe.defaults[n])})),u(e)}),[]),Object(S.jsxs)("div",{id:"login_page",children:[Object(S.jsx)(W,{modalOpen:a,helpOpen:t}),Object(S.jsxs)("div",{id:"login_content",children:[Object(S.jsx)("div",{id:"login_image",children:Object(S.jsx)("div",{id:"image"})}),Object(S.jsxs)("div",{id:"login",children:[Object(S.jsx)("h2",{children:"Login"}),Object(S.jsx)("br",{}),Object(S.jsx)(Ve.a,{size:"md",type:"password",labelText:"Token",placeholder:"IBM Cloud one time Token",required:!0,invalid:C,invalidText:"Please, try againg.",value:O,onChange:function(e){m(e.target.value),I(!1)}}),Object(S.jsxs)("div",{id:"buttons",children:[Object(S.jsx)($.a,{className:"button",href:"".concat(window.location.protocol,"//").concat(window.location.host,"/ibmid/passcode"),target:"_blank",kind:"secondary",children:"Get Token"}),Object(S.jsx)($.a,{onClick:function(){return w.apply(this,arguments)},className:"button",children:"Login"})]})]}),A&&Object(S.jsx)(qe.a,{})]})]})}function dt(){return Object(S.jsx)(c.a,{children:Object(S.jsx)(I,{children:Object(S.jsxs)(i.d,{children:[Object(S.jsx)(i.b,{exact:!0,path:"/",children:Object(S.jsx)(i.a,{to:"/login"})}),Object(S.jsx)(i.b,{exact:!0,path:"/dashboard",component:Ke}),Object(S.jsx)(i.b,{exact:!0,path:"/login",component:ut}),Object(S.jsx)(i.b,{exact:!0,path:"/search",component:$e}),Object(S.jsx)(i.b,{exact:!0,path:"/cognos",component:lt})]})})})}o.a.render(Object(S.jsx)(s.a.StrictMode,{children:Object(S.jsx)(I,{children:Object(S.jsx)(dt,{})})}),document.getElementById("root"))}},[[214,1,2]]]);
//# sourceMappingURL=main.e7665501.chunk.js.map